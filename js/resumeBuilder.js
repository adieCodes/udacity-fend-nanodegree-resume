// TODO: Replace profile photo //
// TODO: Add additional interaction (pins in map?) //
// TODO: Add urls to jobs and projects //

var bio = {
	"name": "Adie Williams",
	"role": "Front-End Web Developer",
	"contacts": {
		"mobile": "07525655736",
		"email": "hello@adie.codes",
		"github": "adieCodes",
		"twitter": "@adie_codes",
		"location": "Sheffield, UK"
	},
	"welcomeMessage": "Front-End Web Developer who uses HTML, CSS and JavaScript to build mobile-first responsive sites. I enjoy working with people to gain a clear understanding of their business, requirements and users; and then use this knowledge to create a focused and enjoyable experience.",
	"skills": ["HTML", "CSS", "JavaScript"],
	"biopic": "images/profile-pic.jpg",
};

var education = {
	"schools": [{
		"name": "Bournemouth University",
		"location": "Bournemouth, UK",
		"degree": "HND in Tourism and Leisure Management",
		"majors": ["n/a", "n/a"],
		"dates": "2001-2003",
		"url": "https://www1.bournemouth.ac.uk/"
	}],
	"onlineCourses": [{
		"title": "Front-End Web Developer Nanodegree",
		"school": "Udacity",
		"dates": "Sep 2016-present",
		"url": "https://www.udacity.com/course/front-end-web-developer-nanodegree--nd001?v=fe1"
	}, {
		"title": "Front End Developer Certification",
		"school": "Free Code Camp",
		"dates": "June 2015-present",
		"url": "https://www.freecodecamp.com/adieCodes"
	}, {
		"title": "WordPress Theme Development",
		"school": "Team Treehouse",
		"dates": "Nov 2014",
		"url": "https://teamtreehouse.com/library/wordpress-theme-development"
	}, {
		"title": "The WordPress Codex",
		"school": "Team Treehouse",
		"dates": "Nov 2014",
		"url": "https://teamtreehouse.com/library/the-wordpress-codex"
	}, {
		"title": "How to Build a WordPress Theme",
		"school": "Team Treehouse",
		"dates": "Aug 2014",
		"url": "https://teamtreehouse.com/library/how-to-make-a-website-with-wordpress"
	}, {
		"title": "Local WordPress Development",
		"school": "Team Treehouse",
		"dates": "Aug 2014",
		"url": "https://teamtreehouse.com/library/local-wordpress-development"
	}, {
		"title": "How to Make a Website with WordPress",
		"school": "Team Treehouse",
		"dates": "Aug 2014",
		"url": "https://teamtreehouse.com/library/how-to-make-a-website-with-wordpress"
	}, {
		"title": "Sass Basics",
		"school": "Team Treehouse",
		"dates": "July 2014",
		"url": "https://teamtreehouse.com/library/sass-basics"
	}, {
		"title": "Git Basics",
		"school": "Team Treehouse",
		"dates": "July 2014",
		"url": "https://teamtreehouse.com/library/git-basics"
	}, {
		"title": "Console Foundations",
		"school": "Team Treehouse",
		"dates": "July 2014",
		"url": "https://teamtreehouse.com/library/console-foundations"
	}, {
		"title": "Website Optimization",
		"school": "Team Treehouse",
		"dates": "July 2014",
		"url": "https://teamtreehouse.com/library/website-optimization"
	}, {
		"title": "Accessibility",
		"school": "Team Treehouse",
		"dates": "July 2014",
		"url": "https://teamtreehouse.com/library/accessibility"
	}, {
		"title": "AJAX Basics",
		"school": "Team Treehouse",
		"dates": "July 2014",
		"url": "https://teamtreehouse.com/library/ajax-basics"
	}, {
		"title": "jQuery Basics",
		"school": "Team Treehouse",
		"dates": "July 2014",
		"url": "https://teamtreehouse.com/library/jquery-basics"
	}, {
		"title": "JavaScript Foundations",
		"school": "Team Treehouse",
		"dates": "July 2014",
		"url": "https://teamtreehouse.com/library/javascript-basics"
	}, {
		"title": "CSS Foundations",
		"school": "Team Treehouse",
		"dates": "June-July 2014",
		"url": "https://teamtreehouse.com/library/css-basics"
	}, {
		"title": "HTML",
		"school": "Team Treehouse",
		"dates": "June 2014",
		"url": "https://teamtreehouse.com/library/html"
	}, {
		"title": "How to Make a Website",
		"school": "Team Treehouse",
		"dates": "June 2014",
		"url": "https://teamtreehouse.com/library/how-to-make-a-website"
	}]
};

var work = {
	"jobs": [{
		"employer": "PeoplePlus Ltd",
		"title": "Telecoms Analyst",
		"dates": "June 2012 - Present",
		"location": "Sheffield, UK",
		"description": "Started as a temp with responsibility for providing 3rd line support and asset management of 2000 mobile devices (BlackBerry’s, mobiles and dongles).<br>After 6 months, I was made permanent and made solely responsible for supporting telephone lines and systems (Cisco, Mitel, Samsung and Panasonic) for 150 sites. This included co-ordinating new offices/office moves, troubleshooting of lines/phone systems, maintenance, liaising with suppliers, invoicing and feeding into board reports.<br>I was also central in a project to migrate from BlackBerry’s to Nokia Lumia’s. Feeding into contract negotiation and Mobile Device Management requirements, testing and implementation. I am currently heavily involved in a project to move our landline infrastructure from legacy phone systems to Avaya."
	}, {
		"employer": "Unemployed",
		"title": "Studying Web Dev",
		"dates": "Feb 2012-June 2012",
		"location": "Sheffield, UK",
		"description": "When I was not job hunting, I spent my time learning about coding, design theory and building my first site for a client. I returned to work as my fiancee was made redundant."
	}, {
		"employer": "Virgin Media via Hays Recruitment",
		"title": "Desktop Support Analyst",
		"dates": "April 2011 - Feb 2012",
		"location": "Sheffield UK",
		"description": "The role was to fix faulty PDA's and organise replacements, build functional devices to be sent to the Field Tech's and produce reports tracking the allocation of the devices as well as support the 2nd Line EUC Analyst when workload permits."
	}, {
		"employer": "St Luke’s Hospice (temp via Sue Ross)",
		"title": "Database Administrator",
		"dates": "Nov 2010-Mar 2011",
		"location": "Sheffield, UK",
		"description": "Responsible for the accuracy and effectiveness of the organisation's database and agreeing criteria for/and producing reports to focus the Fundraising Manager's efforts."
	}, {
		"employer": "Plusnet (temp via Hays Recruitment)",
		"title": "Technical Support Agent",
		"dates": "Aug 2010-Oct 2010",
		"location": "Sheffield, UK",
		"description": "Translated connectivity issues into a language the customer understood and talked them through troubleshooting steps; communicating and escalating any major issues/outages with the team and management."
	}, {
		"employer": "Unemployed",
		"title": "Full time parent",
		"dates": "Mar 2010-Aug 2010",
		"location": "Sheffield, UK",
		"description": "My partner was required to return to work and we wanted one of us to be a full time parent whilst our son was still developing until he had transitioned and settled in nursery."
	}, {
		"employer": "UFI Ltd",
		"title": "Product Co-ordinator",
		"dates": "Oct 2008-Mar 2010",
		"location": "Sheffield, UK",
		"description": "Managed the production of new courses to ensure they met development and launch deadlines. Communicated with the Learning Centre Network to ensure they are aware of all new releases and bug fixes. I was appointed second business lead in a project to develop a new database to be used throughout the organisation, where I was responsible for agreeing and defining business requirements for teams within our department and feeding these back to the requirements team. During this project I learnt formulas and VBA programming to accurately and efficiently cleanse 10 years worth of data; provided solutions for usability and design problems during conception of the database; led testing of the database, managed feedback and agreed priority for fixes; produced user manuals and gave training to teams within the department with supported provided as needed; deconstructed and refined the release process; developed a tracker that was used department-wide to ensure all areas had up-to date information without having to put in a request."
	}, {
		"employer": "Sue Ross",
		"title": "Temp Roles",
		"dates": "May 2008-Oct 2008",
		"location": "Sheffield, UK",
		"description": "One of the roles Sue Ross allocated me was at a factory where I was responsible for monitoring stock levels.  This was where I first started to learn about Excel formulas."
	}, {
		"employer": "BT Lynx Ltd",
		"title": "Engineering Resource Co-ordinator",
		"dates": "May 2008 2012-May 2008",
		"location": "Sheffield, UK",
		"description": "My role was to organise the Engineers site visits and ensure they had access to the appropriate components. This gave me an understanding of the makeup of computers."
	}, {
		"employer": "DLA Piper UK LLP",
		"title": "Anti-Money Laundering Compliance Assistant",
		"dates": "Dec 2006-Mar 2008",
		"location": "Sheffield, UK",
		"description": "I was responsible for identifying all new clients to the requirements of the Law Society. This meant obtaining ID for individual clients and doing relevant searches on Businesses to ensure there were no persons of concern involved in the business."
	}, {
		"employer": "Norwich Union",
		"title": "Quality Champion Representative",
		"dates": "Feb 2006-Oct 2006",
		"location": "Sheffield, UK",
		"description": "This involved quality checking the communication between the Pension teams and their clients and ensuring it was of a high standard."
	}, {
		"employer": "Unemployed",
		"title": "Relocating and job hunting",
		"dates": "Nov 2005-Feb 2006",
		"location": "Sheffield, UK",
		"description": "I spent this time relocating to Sheffield and having an extended family holiday. I supported myself during this period through my savings."
	}, {
		"employer": "Mortgage Intelligence Ltd",
		"title": "Senior Network Authoriser",
		"dates": "May 2004-Nov 2005",
		"location": "Sheffield, UK",
		"description": "Mortgage Intelligence are a Mortgage Network who offer compliance services to Mortgage Brokers. My initial role was to process the applications for new members and undertake background checks to ensure there were no concerns with regards to their finances or trustworthiness. I was promoted to Team Leader for the Network Team. This role comprised of leading a team of three Network Administrators, making presentations and completing reports to ensure we were meeting targets and to push through my suggestions for improvements to processes (which is a theme throughout my career)."
	}]
};

var projects = {
	"projects": [{
		"title": "Udacity Portfolio Project",
		"dates": "November 2016",
		"description": "Responsive portfolio project using Flexbox",
		"images": ["images/portfolio-logo.png", "images/portfolio-screenshot.png"]
	}, {
		"title": "Wikipedia Viewer",
		"dates": "May 2016",
		"description": "Wikipedia seach app using the Wikipedia API.",
		"images": ["images/wikipedia-input.png", "images/wikipedia-output.png"]
	}, {
		"title": "Pomodoro Timer",
		"dates": "April 2016",
		"description": "Pomodoro timer with start, stop, pause and customised timer",
		"images": ["images/pomodoro-screenshot.png"]
	}]
};

// receive bio object
// check if bio object has properties
// check type of bio property
// format property
// add property in appropriate location

bio.showContact = function(obj) {
	// loop through bio.contacts
	$.each(obj, function(key) {
		// store HTML
		var contactHTML = [];
		// add appropriate formatting
		if (key == 'mobile') {
			var formattedmobile = HTMLmobile.replace('%link%', bio.contacts.mobile);
			formattedmobile = formattedmobile.replace('%data%', bio.contacts.mobile);
			contactHTML.push(formattedmobile);
		} else if (key == 'email') {
			var formattedemail = HTMLemail.replace('%link%', bio.contacts.email);
			formattedemail = formattedemail.replace('%data%', bio.contacts.email);
			contactHTML.push(formattedemail);
		} else if (key == 'twitter') {
			var formattedtwitter = HTMLtwitter.replace('%data%', bio.contacts.twitter);
			formattedtwitter = formattedtwitter.replace('%link%', bio.contacts.twitter);
			contactHTML.push(formattedtwitter);
		} else if (key == 'github') {
			var formattedgithub = HTMLgithub.replace('%link%', bio.contacts.github);
			formattedgithub = formattedgithub.replace('%data%', bio.contacts.github);
			contactHTML.push(formattedgithub);
		} else if (key == 'blog') {
			var formattedblog = HTMLblog.replace('%link%', bio.contacts.blog);
			formattedblog = formattedblog.replace('%data%', bio.contacts.blog);
			contactHTML.push(formattedblog);
		} else if (key == 'location') {
			var formattedlocation = HTMLlocation.replace('%data%', bio.contacts.location);
			contactHTML.push(formattedlocation);
		} else {
			// if no match pass generic formatting
			var formattedcontactGeneric = HTMLcontactGeneric.replace('%data%', this);
			formattedcontactGeneric = formattedcontactGeneric.replace('%contact%', key);
			contactHTML.push(formattedcontactGeneric);
		}
		$('#topContacts').append(contactHTML);
		$('#footerContacts').append(contactHTML);
	});
};

bio.display = function() {
	var headerContent = [];
	var heroContent = [];
	var skillsContent = [];
	if (bio.hasOwnProperty('name')) {
		var formattedName = HTMLheaderName.replace("%data%", bio.name);
		headerContent.push(formattedName);
	}
	if (bio.hasOwnProperty('role')) {
		var formattedRole = HTMLheaderRole.replace("%data%", bio.role);
		headerContent.push(formattedRole);
	}
	if (bio.hasOwnProperty('contacts')) {
		bio.showContact(bio.contacts);
	}
	if (bio.hasOwnProperty('biopic')) {
		var formattedbioPic = HTMLbioPic.replace("%data%", bio.biopic);
		heroContent.push(formattedbioPic);
	}
	if (bio.hasOwnProperty('welcomeMessage')) {
		var formattedwelcomeMessage = HTMLwelcomeMsg.replace('%data%', bio.welcomeMessage);
		heroContent.push(formattedwelcomeMessage);
	}
	if (bio.hasOwnProperty('skills')) {
		$('#topContacts').after(HTMLskillsStart);
		bio.skills.forEach(function(prop) {
			var formattedSkill = HTMLskills.replace('%data%', prop);
			$('#skills').append(formattedSkill);
		});
	}
	$('#header').prepend(headerContent);
	$('#topContacts').after(heroContent);
};

bio.display();

work.display = function() {
	var i = 0;
	work.jobs.forEach(function(role) {
		$("#workExperience").append(HTMLworkStart);
		var formattedEmployer, formattedEmployerTitle, formattedEmployerDates, formattedEmployerLocation, formattedEmployerDescription;
		if (role.hasOwnProperty('employer')) {
			formattedEmployer = HTMLworkEmployer.replace("%data%", role.employer);
		}
		if (role.hasOwnProperty('title')) {
			formattedEmployerTitle = HTMLworkTitle.replace("%data%", role.title);
		}
		var formattedEmployerAndTitle = formattedEmployer + formattedEmployerTitle;
		if (role.hasOwnProperty('dates')) {
			formattedEmployerDates = HTMLworkDates.replace("%data%", role.dates);
		}
		if (role.hasOwnProperty('location')) {
			formattedEmployerLocation = HTMLworkLocation.replace("%data%", role.location);
		}
		if (role.hasOwnProperty('description')) {
			formattedEmployerDescription = HTMLworkDescription.replace("%data%", role.description);
		}
		$(".work-entry:last").append(formattedEmployerAndTitle, formattedEmployerDates, formattedEmployerLocation, formattedEmployerDescription);
		if (i > 4) {
			$(".work-entry:last").addClass('hide');
		}
		i++;
	});
	if ($(".work-entry:last").hasClass('hide')) {
		var workBtn;
		workBtn = '<button class="btn btn__work">More</button>';
		$('#workExperience').append(workBtn);
	}
	$(".btn__work").click(function() {
		if ($(".work-entry").hasClass('unhide')) {
			$(".work-entry").removeClass('unhide');
			$('.btn__work').html("More");
		} else {
			$(".work-entry").addClass('unhide');
			$('.btn__work').html("Less");
		}
	});
};
work.display();

projects.display = function() {
	var i = 0;
	projects.projects.forEach(function(proj) {
		$("#projects").append(HTMLprojectStart);
		var formattedProjectTitle,
			formattedProjectDates,
			formattedProjectDescription,
			formattedProjectImages;
		if (proj.hasOwnProperty('title')) {
			formattedProjectTitle = HTMLprojectTitle.replace("%data%", proj.title);
		}
		if (proj.hasOwnProperty('dates')) {
			formattedProjectDates = HTMLprojectDates.replace("%data%", proj.dates);
		}
		if (proj.hasOwnProperty('description')) {
			formattedProjectDescription = HTMLprojectDescription.replace("%data%", proj.description);
		}
		if (proj.hasOwnProperty('images')) {
			formattedProjectImages = [];
			proj.images.forEach(function(img) {
				var formattedProjectImage = HTMLprojectImage.replace("%data%", img);
				formattedProjectImages.push(formattedProjectImage);
			});
		}
		$(".project-entry:last").append(formattedProjectTitle, formattedProjectDates, formattedProjectDescription, formattedProjectImages);
		if (i > 4) {
			$(".project-entry:last").addClass('hide');
		}
		i++;
	});
	if ($(".project-entry:last").hasClass('hide')) {
		var educationBtn;
		educationBtn = '<button class="btn btn__project">More</button>';
		$('#projects').append(educationBtn);
	}
	$(".btn__project").click(function() {
		if ($(".project-entry").hasClass('unhide')) {
			$(".project-entry").removeClass('unhide');
			$('.btn__project').html("More");
		} else {
			$(".project-entry").addClass('unhide');
			$('.btn__project').html("Less");
		}
	});
};
projects.display();

education.display = function() {
	if (education.schools.length > 0) {
		$('#education').append(HTMLschoolStart);
		education.schools.forEach(function(sch) {
			var formattedSchoolName,
				formattedSchoolLocation,
				formattedSchoolDegree,
				formattedSchoolMajor,
				formattedSchoolDates;
			if (sch.hasOwnProperty('name')) {
				formattedSchoolName = HTMLschoolName.replace('%data%', sch.name);
			}
			if (sch.hasOwnProperty('location')) {
				formattedSchoolLocation = HTMLschoolLocation.replace('%data%', sch.location);
			}
			if (sch.hasOwnProperty('degree')) {
				formattedSchoolDegree = HTMLschoolDegree.replace('%data%', sch.degree);
			}
			if (sch.hasOwnProperty('majors')) {
				formattedSchoolMajor = HTMLschoolMajor.replace('%data%', sch.majors);
			}
			if (sch.hasOwnProperty('dates')) {
				formattedSchoolDates = HTMLschoolDates.replace('%data%', sch.dates);
			}
			if (sch.hasOwnProperty('url')) {
				formattedSchoolName = formattedSchoolName.replace('#', sch.url);
			}
			$('.education-entry:last').append(formattedSchoolName + formattedSchoolDegree, formattedSchoolDates, formattedSchoolLocation, formattedSchoolMajor);
		});
	}
	if (education.onlineCourses.length > 0) {
		var i = 0;
		$('#education').append(HTMLonlineClasses);
		education.onlineCourses.forEach(function(course) {
			var formattedonlineTitle,
				formattedonlineSchool,
				formattedonlineDates,
				formattedonlineURL;
			$('#education').append(HTMLschoolStart);
			if (course.hasOwnProperty('title')) {
				formattedonlineTitle = HTMLonlineTitle.replace('%data%', course.title);
			}
			if (course.hasOwnProperty('school')) {
				formattedonlineSchool = HTMLonlineSchool.replace('%data%', course.school);
			}
			if (course.hasOwnProperty('dates')) {
				formattedonlineDates = HTMLonlineDates.replace('%data%', course.dates);
			}
			if (course.hasOwnProperty('url')) {
				formattedonlineTitle = formattedonlineTitle.replace('#', course.url);
			}
			$('.education-entry:last').append(formattedonlineTitle + formattedonlineSchool, formattedonlineDates);
			if (i > 4) {
				$(".education-entry:last").addClass('hide');
			}
			i++;
		});
		if ($(".education-entry:last").hasClass('hide')) {
			var educationBtn;
			educationBtn = '<button class="btn btn__edu">More</button>';
			$('#education').append(educationBtn);
		}
		$(".btn__edu").click(function() {
			if ($(".education-entry").hasClass('unhide')) {
				$(".education-entry").removeClass('unhide');
				$('.btn__edu').html("More");
			} else {
				$(".education-entry").addClass('unhide');
				$('.btn__edu').html("Less");
			}
		});
	}
};
education.display();

$('#mapDiv').append(googleMap);
